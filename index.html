<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Radar de Editais ‚Äî Virtus et Honor</title>
<style>
  :root{
    --bg-start:#03040a;
    --bg-end:#0b1118;
    --card-start:#071018;
    --card-end:#0f1723;
    --muted:rgba(230,230,230,.72);
    --accent-1:#8be9fd;
    --accent-2:#bd93f9;
    --accent-3:#ff79c6;
    --danger:#ff3b3b;
    --warn:#ffd93b;
    --info:#3ba0ff;
    --success:#50fa7b;
    --radius:12px;
    --max-default:980px;
    --transition:.16s;
    --font-sans:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;padding:0;font-family:var(--font-sans);-webkit-font-smoothing:antialiased;background:linear-gradient(180deg,var(--bg-start),var(--bg-end));color:#e6e6e6}
  html[data-embed] body{background:transparent}

  #radarWrap{width:100%;max-width:var(--max-default);margin:12px auto;padding:0;transition:max-width var(--transition) ease}
  #radar{background:linear-gradient(180deg,var(--bg-start),var(--bg-end));border:1px solid rgba(255,255,255,.03);padding:16px;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,.6)}

  .header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
  .title{font-weight:800;font-size:18px;background:linear-gradient(90deg,var(--accent-1),var(--accent-2),var(--accent-3));-webkit-background-clip:text;color:transparent}
  .subtitle{font-size:12px;color:var(--muted)}
  .controls{display:flex;gap:8px;align-items:center}
  .ctrl-btn{background:transparent;border:1px solid rgba(255,255,255,.04);padding:6px 10px;border-radius:8px;cursor:pointer;color:var(--muted);font-size:13px}
  .ctrl-btn:focus{outline:3px solid rgba(139,233,253,.12);outline-offset:3px}
  .ctrl-btn:hover{border-color:rgba(255,255,255,.08);color:#fff}

  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;align-items:start}
  .section-title{grid-column:span 12;color:var(--muted);font-size:14px;margin-top:6px;margin-bottom:6px;font-weight:700}

  .card{grid-column:span 12;background:linear-gradient(145deg,var(--card-start),var(--card-end));border:1px solid rgba(255,255,255,.03);padding:12px;border-radius:12px;position:relative;cursor:pointer;transition:transform .14s ease,border-color .14s ease,box-shadow .14s ease;user-select:none;display:flex;flex-direction:column;gap:8px}
  .card:hover{transform:translateY(-4px);box-shadow:0 12px 36px rgba(0,0,0,.5);border-color:rgba(255,255,255,.06)}
  .card.small{padding:10px}
  .card::before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;border-radius:6px 0 0 6px}
  .alvo::before{background:var(--danger)} .obs::before{background:var(--warn)} .reta::before{background:var(--info)}

  .card-row{display:flex;justify-content:space-between;align-items:flex-start;gap:12px}
  .left{display:flex;flex-direction:column;gap:6px}
  .name{font-weight:700;font-size:15px}
  .meta{font-size:12px;color:var(--muted)}
  .pill{font-size:11px;padding:6px 10px;border-radius:999px;background:rgba(0,0,0,.24);border:1px solid rgba(255,255,255,.03);white-space:nowrap}
  .pill.previsto{color:var(--accent-1);border-color:var(--accent-1)} .pill.autorizado{color:var(--success);border-color:var(--success)}
  .pill.pldo{color:var(--warn);border-color:var(--warn)} .pill.longo{color:var(--info);border-color:var(--info)}
  .tag-small{font-size:11px;color:var(--muted)}

  /* expandable description */
  .desc{
    font-size:13px;color:#dfeaf0;line-height:1.45;
    max-height:0;overflow:hidden;transition:max-height .2s ease,padding .18s ease;
    padding:0 2px;
  }
  .desc.open{max-height:400px;padding-top:8px;padding-bottom:6px}

  .time-right{text-align:right;min-width:84px}

  .sr-only{position:absolute !important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

  @media (min-width:980px){
    #radarWrap.grouped .grid .card.half{grid-column:span 6}
  }
  @media (max-width:980px){
    #radar{padding:12px}
    .card{padding:10px}
    .pill{padding:5px 8px}
  }
</style>
</head>
<body>
  <div id="radarWrap" class="grouped" role="region" aria-label="Radar de Editais ‚Äî Virtus et Honor">
    <div id="radar" role="application" aria-describedby="radar-note">
      <div class="header">
        <div>
          <div class="title">üì° Radar de Editais ‚Äî Virtus et Honor</div>
          <div class="subtitle" id="updatedAt">Atualizado em: 20/02/2026</div>
        </div>

        <div class="controls" role="toolbar" aria-label="Controles do widget">
          <button id="toggleLayout" class="ctrl-btn" title="Alternar modo">Modo: Prioridade</button>
        </div>
      </div>

      <div class="grid" id="grid" role="list" aria-live="polite"></div>
    </div>
  </div>

<script>
/* ========== DADOS (edite aqui) ========== */
const updatedAtText = "20/02/2026";

const concursos = [
  {key:"pmgo", titulo:"PM-GO", tituloFull:"Pol√≠cia Militar do Estado de Goi√°s ‚Äî Soldado", grupo:"alvo", tag:"PREVISTO", data:"2026-09-01", short:"Pr√≥ximo edital: jul‚Äìout/2026; pico set/2026; prova nov/2026.", html:"<strong>Pol√≠cia Militar do Estado de Goi√°s ‚Äî Soldado</strong><br>Pr√≥ximo edital: <strong>jul‚Äìout/2026</strong>, pico em <strong>set/2026</strong>. Prova estimada em <strong>nov/2026</strong>."},
  {key:"prf", titulo:"PRF", tituloFull:"Pol√≠cia Rodovi√°ria Federal ‚Äî Concurso Nacional", grupo:"alvo", tag:"M√âDIO PRAZO", data:"2026-11-01", short:"Concurso 2021 v√°lido at√© jun/2026; prov√°vel edital 2¬∫ sem/2026; provas in√≠cio 2027.", html:"<strong>Pol√≠cia Rodovi√°ria Federal</strong><br>Concurso 2021 prorrogado at√© <strong>jun/2026</strong>. Cen√°rio prov√°vel: edital no <strong>2¬∫ semestre de 2026</strong>."},
  {key:"pcmt", titulo:"PC-MT", tituloFull:"Pol√≠cia Civil - MT", grupo:"obs", tag:"PLDO", data:"2026-10-01", short:"Previsto no PLDO 2026; poss√≠vel edital no 2¬∫ sem/2026.", html:"<strong>Pol√≠cia Civil - MT</strong><br>Previsto no PLDO 2026. Poss√≠vel edital no segundo semestre de 2026."},
  {key:"pmt", titulo:"PM-MT", tituloFull:"Pol√≠cia Militar - MT", grupo:"obs", tag:"PLDO", data:"2026-10-15", short:"Previsto no PLDO; vagas para Aluno Oficial e Soldado.", html:"<strong>Pol√≠cia Militar - MT</strong><br>Previsto no PLDO 2026; expectativa de edital em 2026, vinculado a dota√ß√£o or√ßament√°ria."},
  {key:"pcdf", titulo:"PC-DF", tituloFull:"Pol√≠cia Civil - DF", grupo:"obs", tag:"AUTORIZADO", data:"2026-12-01", short:"Autorizado: 105 vagas + 210 CR; expectativa 2026‚Äìin√≠cio 2027.", html:"<strong>Pol√≠cia Civil - DF</strong><br>Autorizado: <strong>105 vagas + 210 CR</strong>. Expectativa de edital entre 2026 e in√≠cio de 2027."},
  {key:"pcpr", titulo:"PC-PR", tituloFull:"Pol√≠cia Civil - PR", grupo:"obs", tag:"AUTORIZADO", data:"2026-09-15", short:"Autorizado e comiss√£o formada; previs√£o 2¬∫ sem/2026.", html:"<strong>Pol√≠cia Civil - PR</strong><br>Autorizado oficialmente com comiss√£o formada. Previs√£o de edital no 2¬∫ semestre de 2026."},
  {key:"pf", titulo:"PF", tituloFull:"Pol√≠cia Federal", grupo:"reta", tag:"LONGO PRAZO", data:"2028-06-01", short:"Tende a ficar para 2028+.", html:"<strong>Pol√≠cia Federal</strong><br>Pr√≥ximo grande concurso tende a ficar para <strong>2028+</strong>."},
  {key:"pcgo", titulo:"PC-GO", tituloFull:"Pol√≠cia Civil - GO", grupo:"reta", tag:"ESTUDO", data:"2027-03-01", short:"Em estudo; poss√≠vel 2026‚Äì2027.", html:"<strong>Pol√≠cia Civil - GO</strong><br>Em estudo; poss√≠vel 2026‚Äì2027."},
  {key:"pcto", titulo:"PC-TO", tituloFull:"Pol√≠cia Civil - TO", grupo:"reta", tag:"COMISS√ÉO", data:"2027-02-01", short:"Comiss√µes e movimenta√ß√µes; chances 2026/2027.", html:"<strong>Pol√≠cia Civil - TO</strong><br>Comiss√µes e movimenta√ß√µes indicam chances de edital em 2026/2027."}
];

const gruposOrdem = [
  { id:"alvo", titulo:"üëÅ‚Äçüó® Em Alvo (Prioridade M√°xima)" },
  { id:"obs", titulo:"‚ö†Ô∏è Em Observa√ß√£o" },
  { id:"reta", titulo:"‚ùÑÔ∏è Na Retaguarda (Monitoramento Estrat√©gico)" }
];

document.getElementById('updatedAt').textContent = `Atualizado em: ${updatedAtText}`;

/* ===== util ===== */
function parseDateISO(d){ return d ? new Date(d + 'T00:00:00') : null; }
function formatDate(d){
  if(!d) return '';
  const dt = parseDateISO(d);
  const day = String(dt.getDate()).padStart(2,'0');
  const mon = String(dt.getMonth()+1).padStart(2,'0');
  const yr = dt.getFullYear();
  return `${day}/${mon}/${yr}`;
}
function tempoRestanteISO(d){
  const alvo = parseDateISO(d);
  if(!alvo) return '';
  const hoje = new Date();
  const hojeStart = new Date(hoje.getFullYear(),hoje.getMonth(),hoje.getDate()).getTime();
  const alvoStart = new Date(alvo.getFullYear(),alvo.getMonth(),alvo.getDate()).getTime();
  const diff = alvoStart - hojeStart;
  if(diff<=0) return 'SAIU';
  const days = Math.floor(diff/86400000);
  const months = Math.floor(days/30);
  if(months>0) return `${months}m`;
  return `${days}d`;
}

/* ===== renderers (Prioridade = agrupado, Proximidade = time) ===== */
const grid = document.getElementById('grid');
const toggleLayoutBtn = document.getElementById('toggleLayout');
let mode = 'group'; // 'group' -> Prioridade, 'time' -> Proximidade

function clearGrid(){ grid.innerHTML = ''; }

function createCardElement(c){
  const el = document.createElement('div');
  el.className = `card ${c.grupo}`;
  el.setAttribute('role','button');
  el.setAttribute('tabindex','0');
  el.setAttribute('aria-expanded','false');
  el.dataset.key = c.key;

  el.innerHTML = `
    <div class="card-row">
      <div class="left">
        <div class="name">${c.tituloFull}</div>
        <div class="meta">${c.short}</div>
      </div>
      <div class="time-right">
        <div><span class="pill ${pillClass(c.tag)}">${c.tag}</span></div>
        <div class="tag-small" style="margin-top:6px">${formatDate(c.data)}</div>
      </div>
    </div>
    <div class="desc" aria-hidden="true">${c.html}</div>
  `;

  // toggle expand / collapse
  function toggleExpand(){
    const desc = el.querySelector('.desc');
    const expanded = el.getAttribute('aria-expanded') === 'true';
    if(expanded){
      el.setAttribute('aria-expanded','false');
      desc.classList.remove('open');
      desc.setAttribute('aria-hidden','true');
    } else {
      el.setAttribute('aria-expanded','true');
      desc.classList.add('open');
      desc.setAttribute('aria-hidden','false');
    }
  }

  el.addEventListener('click', (e) => {
    // if click on interactive child elements in future, ignore ‚Äî currently safe
    toggleExpand();
  });

  el.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleExpand(); }
  });

  return el;
}

function pillClass(label){
  const map = {
    'PREVISTO':'previsto',
    'M√âDIO PRAZO':'previsto',
    'PLDO':'pldo',
    'AUTORIZADO':'autorizado',
    'LONGO PRAZO':'longo',
    'ESTUDO':'pldo',
    'COMISS√ÉO':'pldo'
  };
  return map[label] || '';
}

function renderGrouped(){
  clearGrid();
  for(const g of gruposOrdem){
    const sec = document.createElement('div');
    sec.className = 'section-title';
    sec.textContent = g.titulo;
    grid.appendChild(sec);

    const itens = concursos.filter(c=>c.grupo===g.id);
    if(itens.length===0){
      const empty = document.createElement('div');
      empty.className = 'card small';
      empty.innerHTML = `<div class="left"><div class="name">‚Äî</div><div class="meta">Sem alvos nessa categoria</div></div>`;
      grid.appendChild(empty);
    }

    for(const c of itens){
      grid.appendChild(createCardElement(c));
    }
  }
}

function renderTime(){
  clearGrid();
  const items = [...concursos].sort((a,b) => parseDateISO(a.data) - parseDateISO(b.data));
  for(const c of items){
    const el = document.createElement('div');
    el.className = `card ${c.grupo} small`;
    el.setAttribute('role','button');
    el.setAttribute('tabindex','0');
    el.dataset.key = c.key;

    el.innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px">
        <div style="flex:1">
          <div class="name">${c.titulo}</div>
          <div class="meta" style="margin-top:6px">${c.short}</div>
        </div>
        <div style="text-align:right;min-width:84px">
          <div style="font-size:18px;font-weight:800">‚è≥ ${tempoRestanteISO(c.data)}</div>
          <div class="tag-small" style="margin-top:6px">${formatDate(c.data)}</div>
        </div>
      </div>
      <div class="desc" aria-hidden="true">${c.html}</div>
    `;

    // toggle per card (same behavior as grouped)
    const desc = el.querySelector('.desc');
    el.addEventListener('click', ()=> {
      const expanded = el.getAttribute('aria-expanded') === 'true';
      if(expanded){
        el.setAttribute('aria-expanded','false'); desc.classList.remove('open'); desc.setAttribute('aria-hidden','true');
      } else {
        el.setAttribute('aria-expanded','true'); desc.classList.add('open'); desc.setAttribute('aria-hidden','false');
      }
    });
    el.addEventListener('keydown', (e)=> {
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault();
        const expanded = el.getAttribute('aria-expanded') === 'true';
        if(expanded){ el.setAttribute('aria-expanded','false'); desc.classList.remove('open'); desc.setAttribute('aria-hidden','true'); }
        else { el.setAttribute('aria-expanded','true'); desc.classList.add('open'); desc.setAttribute('aria-hidden','false'); }
      }
    });

    grid.appendChild(el);
  }
}

/* toggle layout control */
toggleLayoutBtn.addEventListener('click', () => {
  if(mode === 'group'){
    mode = 'time';
    toggleLayoutBtn.textContent = 'Modo: Proximidade';
    renderTime();
    document.getElementById('radarWrap').classList.remove('grouped');
    document.getElementById('radarWrap').classList.add('timeline');
  } else {
    mode = 'group';
    toggleLayoutBtn.textContent = 'Modo: Prioridade';
    renderGrouped();
    document.getElementById('radarWrap').classList.remove('timeline');
    document.getElementById('radarWrap').classList.add('grouped');
  }
});

/* keyboard shortcuts: M toggles, H shows short announcement (no modal) */
document.addEventListener('keydown',(e)=>{
  if(e.metaKey||e.ctrlKey||e.altKey) return;
  if(e.key.toLowerCase()==='m'){ toggleLayoutBtn.click(); }
  if(e.key.toLowerCase()==='h'){
    // brief inline assist: small announce element
    const live = document.createElement('div'); live.className='sr-only'; live.setAttribute('aria-live','polite');
    live.textContent = 'Atalhos: M alterna Prioridade/Proximidade. Clique em um card para ver a descri√ß√£o.';
    document.body.appendChild(live);
    setTimeout(()=> live.remove(),1300);
  }
});

/* initial render */
renderGrouped();

/* announce loaded */
(function announce(){ const live=document.createElement('div'); live.className='sr-only'; live.setAttribute('aria-live','polite'); live.textContent='Radar carregado'; document.body.appendChild(live); setTimeout(()=> live.remove(),1200); })();
</script>
</body>
</html>
