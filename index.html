<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Radar de Editais ‚Äî Virtus et Honor</title>
<style>
  :root{
    --bg-start:#03040a;
    --bg-end:#0b1118;
    --card-bg:#0f1723;
    --muted:rgba(230,230,230,.72);
    --accent-1:#8be9fd;
    --accent-2:#bd93f9;
    --accent-3:#ff79c6;
    --danger:#ff4d4d;     /* vermelho (Em Alvo) */
    --warn:#ffd93b;       /* amarelo (Em Observa√ß√£o) */
    --info:#7cc7ff;       /* azul claro (Retaguarda) */
    --pill-bg: rgba(0,0,0,.18);
    --radius:12px;
    --max-width:980px;
    --transition:.16s;
    --font-sans:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;padding:0;font-family:var(--font-sans);-webkit-font-smoothing:antialiased;background:linear-gradient(180deg,var(--bg-start),var(--bg-end));color:#e6e6e6}
  html[data-embed] body{background:transparent}

  /* container */
  #radarWrap{max-width:var(--max-width);margin:12px auto;padding:0;transition:max-width var(--transition) ease}
  #radar{background:linear-gradient(180deg,var(--bg-start),var(--bg-end));border:1px solid rgba(255,255,255,.03);padding:16px;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,.6)}

  /* header */
  .header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
  .title{font-weight:800;font-size:18px;background:linear-gradient(90deg,var(--accent-1),var(--accent-2),var(--accent-3));-webkit-background-clip:text;color:transparent}
  .subtitle{font-size:12px;color:var(--muted)}
  .controls{display:flex;gap:8px;align-items:center}
  .ctrl-btn{background:transparent;border:1px solid rgba(255,255,255,.04);padding:6px 10px;border-radius:8px;cursor:pointer;color:var(--muted);font-size:13px}
  .ctrl-btn:hover{border-color:rgba(255,255,255,.08);color:#fff}
  .sr-only{position:absolute !important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

  /* grid / sections */
  .grid{display:grid;grid-template-columns:1fr;gap:12px;align-items:start}
  .section-title{grid-column:span 1;font-size:13px;margin-top:6px;margin-bottom:6px;font-weight:800;padding:8px 12px;border-radius:10px}
  .section-title.alvo{background:linear-gradient(90deg, rgba(255,77,77,.08), transparent); color:var(--danger)}
  .section-title.obs{background:linear-gradient(90deg, rgba(255,217,59,.06), transparent); color:var(--warn)}
  .section-title.reta{background:linear-gradient(90deg, rgba(124,199,255,.06), transparent); color:var(--info)}

  /* card */
  .card{width:100%;background:linear-gradient(145deg,#071018,var(--card-bg));border:1px solid rgba(255,255,255,.03);padding:10px 12px;border-radius:12px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:12px;min-height:52px;transition:transform .12s ease,box-shadow .12s ease}
  .card:hover{transform:translateY(-3px);box-shadow:0 10px 26px rgba(0,0,0,.6);border-color:rgba(255,255,255,.06)}
  .card::before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;border-radius:6px 0 0 6px}
  .card.alvo::before{background:var(--danger)} .card.obs::before{background:var(--warn)} .card.reta::before{background:var(--info)}

  /* left: pill + title (pill before title) */
  .card-left{display:flex;align-items:center;gap:12px;flex:1;justify-content:center}
  .pill{font-size:12px;padding:6px 10px;border-radius:999px;background:var(--pill-bg);border:1px solid rgba(255,255,255,.04);white-space:nowrap}
  .pill.previsto{color:var(--accent-1);border-color:var(--accent-1)}
  .pill.pldo{color:var(--warn);border-color:var(--warn)}
  .pill.autorizado{color:var(--success);border-color:var(--success)}
  .pill.longo{color:var(--info);border-color:var(--info)}
  .title-card{font-weight:700;font-size:14px;text-align:center}

  /* right area: time (used in proximidade) */
  .card-right{text-align:right;min-width:96px}
  .countdown{font-weight:800;font-size:16px}
  .date-small{font-size:12px;color:var(--muted);margin-top:6px}

  /* modal */
  #modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.72));z-index:9999}
  #modal.open{display:flex}
  #modalBox{background:linear-gradient(180deg,#071018,#0b131a);border-radius:14px;padding:20px;border:1px solid rgba(255,255,255,.04);width:min(920px,94%);max-height:86vh;overflow:auto;position:relative;box-shadow:0 20px 60px rgba(0,0,0,.6)}
  .modal-close{position:absolute;right:14px;top:12px;cursor:pointer;color:var(--muted);font-size:18px;padding:6px;border-radius:8px}
  .modal-close:hover{color:#fff}
  .modal-content{color:#e6eef6;line-height:1.6;font-size:14px}
  .modal-content h3{margin-top:6px;margin-bottom:8px}
  .modal-content hr{border:none;border-top:1px solid rgba(255,255,255,.04);margin:12px 0}

  /* responsive */
  @media (max-width:680px){
    #modalBox{width:96%;padding:16px}
    .card-left{gap:8px}
    .card-right{min-width:72px}
  }
</style>
</head>
<body>
  <div id="radarWrap" class="grouped" role="region" aria-label="Radar de Editais ‚Äî Virtus et Honor">
    <div id="radar" role="application" aria-describedby="radar-note">
      <div class="header">
        <div>
          <div class="title">üì° Radar de Editais ‚Äî Virtus et Honor</div>
          <div class="subtitle" id="updatedAt">Atualizado em: 20/02/2026</div>
        </div>
        <div class="controls" role="toolbar" aria-label="Controles do widget">
          <button id="toggleLayout" class="ctrl-btn" title="Alternar modo">Modo: Prioridade</button>
        </div>
      </div>

      <div id="grid" class="grid" role="list" aria-live="polite"></div>
    </div>
  </div>

  <!-- Modal central (injetado, oculto por padr√£o) -->
  <div id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="modalBox" role="document" aria-labelledby="modalTitle" tabindex="-1">
      <button class="modal-close" id="modalClose" aria-label="Fechar">‚úï</button>
      <div id="modalContent" class="modal-content"></div>
    </div>
  </div>

<script>
/* ===========================
   Dados: cada concurso com descri√ß√£o pr√≥pria (texto detalhado)
   =========================== */
const updatedAtText = "20/02/2026";
document.getElementById('updatedAt').textContent = `Atualizado em: ${updatedAtText}`;

/* lista de concursos: chave, t√≠tulo reduzido (display), grupo, tag, data (para proximidade), descri√ß√£o completa */
const concursos = [
  {
    key: "pmgo",
    titulo: "Pol√≠cia Militar do Estado de Goi√°s",
    grupo: "alvo",
    tag: "PREVISTO",
    data: "2026-09-01",
    full: `<strong>PM-GO ‚Äî Pr√≥ximo edital (Soldado)</strong><br>
    Pr√≥ximo edital de Soldado tende a sair <strong>entre julho e outubro de 2026</strong>, com <strong>pico de probabilidade em setembro de 2026</strong> e prova em <strong>novembro de 2026</strong>.`
  },
  {
    key: "prf",
    titulo: "Pol√≠cia Rodovi√°ria Federal",
    grupo: "alvo",
    tag: "M√âDIO PRAZO",
    data: "2026-11-01",
    full: `<strong>PRF ‚Äî Situa√ß√£o</strong><br>
    Concurso 2021 prorrogado at√© <strong>junho de 2026</strong>, o que empurra o novo edital para <strong>ap√≥s essa data</strong>. Cen√°rio mais prov√°vel √© edital no <strong>2¬∫ semestre de 2026</strong> (set‚Äìdez) com provas no <strong>in√≠cio de 2027</strong>. H√° pedidos oficiais (ex.: <strong>511 vagas</strong> ‚Äî 263 policiais + 248 administrativos) e solicita√ß√µes maiores em an√°lise (at√© 5.137 vagas).`
  },
  {
    key: "pcmt",
    titulo: "Pol√≠cia Civil do Mato Grosso",
    grupo: "obs",
    tag: "PLDO",
    data: "2026-10-01",
    full: `<strong>PC-MT ‚Äî PLDO 2026</strong><br>
    Novo concurso previsto no <strong>PLDO 2026</strong>, com edital projetado para o <strong>2¬∫ semestre de 2026</strong>, ap√≥s o fim da validade do √∫ltimo concurso (Investigador/Escriv√£o v√°lido at√© junho de 2026).`
  },
  {
    key: "pmt",
    titulo: "Pol√≠cia Militar do Mato Grosso",
    grupo: "obs",
    tag: "PLDO",
    data: "2026-10-15",
    full: `<strong>PM-MT ‚Äî PLDO 2026</strong><br>
    Concurso previsto no <strong>PLDO 2026</strong>, com vagas para <strong>Aluno Oficial e Soldado</strong>. Expectativa de edital em 2026, vinculada √† dota√ß√£o or√ßament√°ria.`
  },
  {
    key: "pcdf",
    titulo: "Pol√≠cia Civil do Distrito Federal",
    grupo: "obs",
    tag: "AUTORIZADO",
    data: "2026-12-01",
    full: `<strong>PC-DF ‚Äî Autorizado</strong><br>
    Concurso autorizado com <strong>105 vagas + 210 CR</strong> (Perito / Papiloscopista / Perito M√©dico-Legista). Forte expectativa de edital entre <strong>2026 e in√≠cio de 2027</strong>.`
  },
  {
    key: "pcpr",
    titulo: "Pol√≠cia Civil do Paran√°",
    grupo: "obs",
    tag: "AUTORIZADO",
    data: "2026-09-15",
    full: `<strong>PC-PR ‚Äî Comiss√£o formada</strong><br>
    Autorizado oficialmente com comiss√£o formada para Delegado, Agente e Papiloscopista. Previs√£o de edital no <strong>2¬∫ semestre de 2026</strong>.`
  },
  {
    key: "pf",
    titulo: "Pol√≠cia Federal",
    grupo: "reta",
    tag: "LONGO PRAZO",
    data: "2028-06-01",
    full: `<strong>PF ‚Äî Longo prazo</strong><br>
    Pr√≥ximo grande concurso de n√≠vel nacional tende a ficar para <strong>2028 em diante</strong>, ap√≥s o ciclo atual de convoca√ß√µes e prioriza√ß√£o, no curto prazo, de PRF e pol√≠cias penais estaduais.`
  },
  {
    key: "pcgo",
    titulo: "Pol√≠cia Civil do Estado de Goi√°s",
    grupo: "reta",
    tag: "ESTUDO",
    data: "2027-03-01",
    full: `<strong>PC-GO ‚Äî Em estudo</strong><br>
    Novo concurso em estudos, sem estrutura avan√ßada como PMGO; cen√°rio mais realista √© edital a partir de <strong>2026/2027</strong>, ap√≥s consolida√ß√£o dos concursos da PMGO e ajustes or√ßament√°rios estaduais.`
  },
  {
    key: "pcto",
    titulo: "Pol√≠cia Civil do Tocantins",
    grupo: "reta",
    tag: "COMISS√ÉO",
    data: "2027-02-01",
    full: `<strong>PC-TO ‚Äî Movimenta√ß√µes</strong><br>
    Comiss√£o e movimenta√ß√µes apontam chances de edital em <strong>2026/2027</strong>. Monitorar.`
  }
];

/* order / section names */
const gruposOrdem = [
  { id: "alvo", titulo: "üëÅ‚Äçüó® Em Alvo (Prioridade M√°xima)", cls: "alvo" },
  { id: "obs",  titulo: "‚ö†Ô∏è Em Observa√ß√£o", cls: "obs" },
  { id: "reta", titulo: "‚ùÑÔ∏è Na Retaguarda (Monitoramento Estrat√©gico)", cls: "reta" }
];

/* util: parse/format dates, tempo restante */
function parseDateISO(d){ return d ? new Date(d + 'T00:00:00') : null; }
function formatDate(d){
  if(!d) return '';
  const dt = parseDateISO(d);
  const day = String(dt.getDate()).padStart(2,'0');
  const mon = String(dt.getMonth()+1).padStart(2,'0');
  const yr = dt.getFullYear();
  return `${day}/${mon}/${yr}`;
}
function tempoRestanteISO(d){
  const alvo = parseDateISO(d);
  if(!alvo) return '';
  const hoje = new Date();
  const hojeStart = new Date(hoje.getFullYear(),hoje.getMonth(),hoje.getDate()).getTime();
  const alvoStart = new Date(alvo.getFullYear(),alvo.getMonth(),alvo.getDate()).getTime();
  const diff = alvoStart - hojeStart;
  if(diff<=0) return 'SAIU';
  const days = Math.floor(diff/86400000);
  const months = Math.floor(days/30);
  if(months>0) return `${months}m`;
  return `${days}d`;
}

/* pill class map */
function pillClass(tag){
  const map = {
    'PREVISTO':'previsto',
    'M√âDIO PRAZO':'previsto',
    'PLDO':'pldo',
    'AUTORIZADO':'autorizado',
    'LONGO PRAZO':'longo',
    'ESTUDO':'pldo',
    'COMISS√ÉO':'pldo'
  };
  return map[tag] || '';
}

/* rendering */
const grid = document.getElementById('grid');
const toggleLayoutBtn = document.getElementById('toggleLayout');
let mode = 'group'; // 'group' (Prioridade) | 'time' (Proximidade)

/* clear grid */
function clearGrid(){ grid.innerHTML = ''; }

/* create a single card element */
function createCard(c){
  const el = document.createElement('div');
  el.className = `card ${c.grupo}`;
  el.setAttribute('role','button');
  el.setAttribute('tabindex','0');
  el.dataset.key = c.key;

  // pill on left, title centered, date/countdown on right (used in proximity)
  el.innerHTML = `
    <div class="card-left" aria-hidden="true">
      <div class="pill ${pillClass(c.tag)}">${c.tag}</div>
      <div class="title-card">${c.titulo}</div>
    </div>
    <div class="card-right" aria-hidden="true">
      <div class="countdown">‚è≥ ${tempoRestanteISO(c.data)}</div>
      <div class="date-small">${formatDate(c.data)}</div>
    </div>
  `;

  // open modal specific to this card
  el.addEventListener('click', ()=> openModalForKey(c.key));
  el.addEventListener('keydown', (e)=>{
    if(e.key==='Enter' || e.key===' '){ e.preventDefault(); openModalForKey(c.key); }
  });

  return el;
}

/* Renders grouped (Prioridade) */
function renderGrouped(){
  clearGrid();
  for(const g of gruposOrdem){
    const sec = document.createElement('div');
    sec.className = `section-title ${g.id}`;
    sec.textContent = g.titulo;
    // color class (alvo/obs/reta) applied via CSS class names above
    grid.appendChild(sec);

    const itens = concursos.filter(c=>c.grupo===g.id);
    if(itens.length===0){
      const empty = document.createElement('div');
      empty.className = 'card small';
      empty.innerHTML = `<div style="text-align:center;color:var(--muted)">‚Äî sem alvos nessa categoria ‚Äî</div>`;
      grid.appendChild(empty);
    } else {
      for(const c of itens){
        const card = createCard(c);
        // In "Prioridade" mode we hide the right area (countdown) visually to keep cards compact.
        const right = card.querySelector('.card-right');
        if(right) right.style.display = 'none';
        grid.appendChild(card);
      }
    }
  }
}

/* Renders time-ordered (Proximidade) */
function renderTime(){
  clearGrid();
  // sort by date ascending (closest first)
  const items = [...concursos].sort((a,b)=> {
    const A = parseDateISO(a.data) || 1e18;
    const B = parseDateISO(b.data) || 1e18;
    return A - B;
  });
  for(const c of items){
    const card = createCard(c);
    // in time mode show the right area (countdown) prominently
    const right = card.querySelector('.card-right');
    if(right) right.style.display = 'block';
    grid.appendChild(card);
  }
}

/* Modal management (single shared modal) */
const modal = document.getElementById('modal');
const modalBox = document.getElementById('modalBox');
const modalContent = document.getElementById('modalContent');
const modalClose = document.getElementById('modalClose');
let lastFocused = null;

function openModalForKey(key){
  const data = concursos.find(x=>x.key===key);
  if(!data) return;
  lastFocused = document.activeElement;

  // build modal HTML: title + full description (from data.full), optionally add metadata
  modalContent.innerHTML = `
    <h3>${data.titulo}</h3>
    <div style="color:var(--muted);font-size:13px;margin-bottom:8px">
      <span class="pill ${pillClass(data.tag)}" style="margin-right:8px">${data.tag}</span>
      <span>Previs√£o: ${formatDate(data.data)} ‚Ä¢ Proximidade: ‚è≥ ${tempoRestanteISO(data.data)}</span>
    </div>
    <div>${data.full}</div>
  `;

  // open
  modal.classList.add('open');
  modal.setAttribute('aria-hidden','false');

  // focus management
  setTimeout(()=> {
    modalClose.focus();
    modalBox.scrollTop = 0;
  }, 80);
}

/* close modal */
function closeModal(){
  modal.classList.remove('open');
  modal.setAttribute('aria-hidden','true');
  // restore focus
  try{ if(lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus(); }catch(e){}
}

/* close modal when clicking overlay */
modal.addEventListener('click', (e)=>{
  if(e.target === modal) closeModal();
});
modalClose.addEventListener('click', closeModal);
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape' && modal.classList.contains('open')){ closeModal(); }
});

/* toggle layout control */
toggleLayoutBtn.addEventListener('click', ()=>{
  if(mode === 'group'){
    mode = 'time';
    toggleLayoutBtn.textContent = 'Modo: Proximidade';
    renderTime();
    document.getElementById('radarWrap').classList.remove('grouped');
    document.getElementById('radarWrap').classList.add('timeline');
  } else {
    mode = 'group';
    toggleLayoutBtn.textContent = 'Modo: Prioridade';
    renderGrouped();
    document.getElementById('radarWrap').classList.remove('timeline');
    document.getElementById('radarWrap').classList.add('grouped');
  }
});

/* keyboard shortcuts: M toggles, H shows short assist (aria-live) */
document.addEventListener('keydown',(e)=>{
  if(e.metaKey||e.ctrlKey||e.altKey) return;
  if(e.key.toLowerCase()==='m'){ toggleLayoutBtn.click(); e.preventDefault(); }
  if(e.key.toLowerCase()==='h'){
    const live = document.createElement('div'); live.className='sr-only'; live.setAttribute('aria-live','polite');
    live.textContent = 'Atalhos: M alterna Prioridade/Proximidade. Clique em um card e pressione Enter para abrir detalhes.';
    document.body.appendChild(live);
    setTimeout(()=> live.remove(),1200);
  }
});

/* initial render */
renderGrouped();

/* small announce on load for assistive tech */
(function announce(){ const live = document.createElement('div'); live.className='sr-only'; live.setAttribute('aria-live','polite'); live.textContent='Radar carregado'; document.body.appendChild(live); setTimeout(()=> live.remove(),1200); })();
</script>
</body>
</html>
