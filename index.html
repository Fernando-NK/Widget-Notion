<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="color-scheme" content="dark">
<meta name="theme-color" content="#03040a">
<title>Radar de Editais ‚Äî Virtus et Honor</title>

<!-- ===== STYLES (com medidas anti-borda branca / embed-friendly) ===== -->
<style>
  :root{
    --bg-start:#03040a;
    --bg-end:#0b1118;
    --card-start:#071019;
    --card-end:#0f1723;
    --muted:rgba(230,230,230,.72);
    --accent-1:#8be9fd;
    --accent-2:#bd93f9;
    --accent-3:#ff79c6;
    --danger:#ff3b3b;
    --warn:#ffd93b;
    --info:#3ba0ff;
    --success:#50fa7b;
    --glass:rgba(255,255,255,0.02);
    --radius:12px;
    --max-default:980px;
    --max-wide:1320px;
    --ui-gap:12px;
    --transition:.18s;
    --font-sans: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }

  /* ---- Global reset + forced transparency for embeds ----
     We add !important in critical places so hosts that allow inline styles are more likely to respect transparency.
     We also ensure min-height and no margins so no "frame padding" appears. */
  *, *::before, *::after { box-sizing: border-box; }
  html, body {
    width:100%;
    height:100%;
    margin:0 !important;
    padding:0 !important;
    background: transparent !important;
    color: #e6e6e6;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    font-family: var(--font-sans);
    -webkit-tap-highlight-color: transparent;
  }

  /* If the host forces a white background on the iframe, try to override internally */
  :root { background: transparent; }
  /* container ensures widget is centered but doesn't create outer padding */
  #radarWrap {
    width:100%;
    max-width:var(--max-default);
    margin:0 auto;
    padding:0;                /* remove padding that causes white border */
    transition: max-width var(--transition) ease;
  }
  /* full-bleed safe fallback when host forces inner padding: we use negative margin on inner wrapper */
  body[data-embed-padding="true"] #radar {
    margin:-9999px;
    padding:18px; /* restore visual padding inside dragged margin */
    border-radius:0;
    box-shadow:none;
  }

  /* main panel (has its own internal padding only) */
  #radar {
    background: linear-gradient(180deg,var(--bg-start),var(--bg-end));
    border: 1px solid rgba(255,255,255,.03);
    padding:16px;
    border-radius:14px;
    box-shadow: 0 8px 30px rgba(2,6,23,.6);
  }

  /* header */
  .header { display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:10px; }
  .title { font-weight:800; font-size:18px; letter-spacing:.4px;
    background: linear-gradient(90deg,var(--accent-1),var(--accent-2),var(--accent-3));
    -webkit-background-clip: text; background-clip:text; color:transparent;
  }
  .subtitle { font-size:12px; color:var(--muted) }

  /* controls */
  .controls { display:flex; gap:8px; align-items:center; }
  .ctrl-btn {
    background:transparent;
    border:1px solid rgba(255,255,255,.04);
    padding:6px 10px;
    border-radius:8px;
    cursor:pointer;
    color:var(--muted);
    font-size:13px;
  }
  .ctrl-btn:focus { outline: 3px solid rgba(139,233,253,.12); outline-offset:3px; }
  .ctrl-btn:hover { border-color: rgba(255,255,255,.08); }

  /* grid */
  .grid {
    display:grid;
    grid-template-columns: repeat(12, 1fr);
    gap:12px;
    align-items:start;
  }
  .card { grid-column: span 12; background: linear-gradient(145deg,var(--card-start),var(--card-end));
    border:1px solid rgba(255,255,255,.03);
    padding:14px;
    border-radius: var(--radius);
    position:relative;
    cursor:pointer;
    transition: transform .14s ease, border-color .14s ease, box-shadow .14s ease;
    user-select:none;
  }
  .card:hover { transform: translateY(-4px) scale(1.01); box-shadow:0 12px 36px rgba(0,0,0,.5); border-color:rgba(255,255,255,.06); }
  /* responsive: half width when wide */
  #radarWrap.wide .card.half { grid-column: span 6; }
  #radarWrap.wide .card.full { grid-column: span 12; }

  /* urgency bar */
  .card::before { content:""; position:absolute; left:0; top:0; bottom:0; width:4px; border-radius:6px 0 0 6px; }
  .alvo::before { background: var(--danger); }
  .obs::before { background: var(--warn); }
  .reta::before { background: var(--info); }

  .head { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; }
  .name { font-weight:700; font-size:15px }
  .meta { font-size:12px; color:var(--muted) }
  .body { margin-top:8px; font-size:13px; color:rgba(230,230,230,.92); line-height:1.45 }

  .pill { font-size:11px; padding:4px 8px; border-radius:999px; background:rgba(0,0,0,.28); border:1px solid rgba(255,255,255,.03); }
  .pill.previsto { color:var(--accent-1); border-color:var(--accent-1) }
  .pill.autorizado { color:var(--success); border-color:var(--success) }
  .pill.pldo { color:var(--warn); border-color:var(--warn) }
  .pill.longo { color:var(--info); border-color:var(--info) }
  .note { margin-top:12px; font-size:12px; color:var(--muted); opacity:.95 }

  /* modal styles */
  .modal-bg {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    background: rgba(2,6,23,.6);
    backdrop-filter: blur(4px);
  }
  .modal-bg.open { display:flex; }
  .modal {
    width:100%;
    max-width:980px;
    background: linear-gradient(180deg,#030512,#081026);
    border-radius:12px;
    padding:20px;
    border:1px solid rgba(255,255,255,.04);
    box-shadow:0 30px 80px rgba(2,6,23,.6);
    transform: translateY(6px) scale(.98);
    opacity:0;
    transition: transform var(--transition) ease, opacity var(--transition) ease;
    max-height:86vh;
    overflow:auto;
  }
  .modal.open { transform: translateY(0) scale(1); opacity:1; }
  .modal-header { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; }
  .modal h3 { font-size:18px; margin-bottom:6px }
  .modal .subtitle { font-size:12px; color:var(--muted) }
  .modal-body { margin-top:12px; font-size:14px; color:#e6e6e6; line-height:1.5; white-space:pre-wrap; }
  .modal .fechar { background:transparent; border:none; color:var(--muted); font-size:16px; cursor:pointer; padding:6px; border-radius:8px; }
  .modal .fechar:hover { color:#fff }

  /* small screens */
  @media (max-width:980px){
    #radarWrap { max-width:100%; }
    #radarWrap.wide { max-width:100%; }
    #radar { padding:12px }
    .card { padding:12px }
    .modal { max-width:94%; padding:16px }
  }

  /* additional UI polish */
  .sr-only { position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
  a.linkish { color:var(--accent-1); text-decoration:none; border-bottom:1px dashed rgba(139,233,253,.12); padding-bottom:1px; }
  /* defensive: remove potential default iframe background from some embed wrappers */
  iframe, embed, object { background: transparent !important; }
</style>
</head>

<body>
<!-- For some embed hosts that add inline padding to body, we detect it on load and set a flag so CSS can adapt -->
<script>
  (function detectEmbedPadding(){
    // If computed body padding is > 8px, host likely added padding.
    try {
      const s = window.getComputedStyle(document.body);
      const pad = (parseFloat(s.paddingTop) || 0) + (parseFloat(s.paddingRight)||0) + (parseFloat(s.paddingBottom)||0) + (parseFloat(s.paddingLeft)||0);
      if (pad > 8) document.body.setAttribute('data-embed-padding','true');
      // Force transparency at runtime as well
      document.documentElement.style.background = 'transparent';
      document.body.style.background = 'transparent';
    } catch(e){}
  })();
</script>

<div id="radarWrap" role="region" aria-label="Radar de Editais ‚Äî Virtus et Honor">
  <div id="radar" role="application" aria-describedby="radar-note">
    <div class="header">
      <div>
        <div class="title">üì° Radar de Editais ‚Äî Virtus et Honor</div>
        <div class="subtitle" id="updatedAt">Atualizado em: 20/02/2026</div>
      </div>

      <div class="controls" role="toolbar" aria-label="Controles do widget">
        <button id="toggleWide" class="ctrl-btn" title="Alternar largura (W)">‚Üî Largura</button>
        <button id="helpBtn" class="ctrl-btn" title="Ajuda (H)">i</button>
        <button id="copyLink" class="ctrl-btn" title="Copiar link p√∫blico">üîó Copiar link</button>
      </div>
    </div>

    <!-- GRID -->
    <div class="grid" id="grid" role="list">
      <!-- Exemplo de cart√£o (v√°rios s√£o gerados via JS) -->
      <!-- cards ser√£o populados por JS para evitar repeti√ß√£o de texto e permitir centralizar conte√∫do -->
    </div>

    <div class="note" id="radar-note">Regra: monitorar apenas <strong>autoriza√ß√£o</strong>, <strong>comiss√£o</strong>, <strong>contrato de banca</strong> ou <strong>dota√ß√£o LOA/LDO</strong>. O resto √© inten√ß√£o.</div>
  </div>
</div>

<!-- MODAL -->
<div id="modalBg" class="modal-bg" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" tabindex="-1">
    <div class="modal-header">
      <div>
        <h3 id="modalTitle">Resumo</h3>
        <div class="subtitle" id="modalSub">Fonte: Radar ‚Äî Virtus et Honor</div>
      </div>
      <div>
        <button class="fechar" id="modalClose" aria-label="Fechar">‚úï</button>
      </div>
    </div>
    <div class="modal-body" id="modalBody" tabindex="0">
      <!-- conte√∫do injetado via JS -->
    </div>
  </div>
</div>

<!-- ===== SCRIPTS ===== -->
<script>
/* ===== Content repository (strings em template literals) ===== */
const contentRepo = {
  pmgo: {
    title: "PM-GO ‚Äî Soldado",
    subtitle: "Prioridade M√°xima ‚Äî monitorar atos oficiais",
    html: `
<strong>üëÅ‚Äçüó® Em Alvo (Prioridade M√°xima)</strong>
- Edital prov√°vel entre <strong>julho e outubro de 2026</strong>.
- Pico de probabilidade em <strong>setembro/2026</strong>.
- Prova estimada em <strong>novembro/2026</strong>.

A√ß√µes: 
‚Ä¢ Monitorar Di√°rio Oficial do Estado (autoriza√ß√£o / portaria de comiss√£o).
‚Ä¢ Verificar LOA/LDO e publica√ß√µes da Secretaria de Seguran√ßa.
`
  },
  prf: {
    title: "PRF ‚Äî Policial Rodovi√°rio Federal",
    subtitle: "Federal ‚Äî validade e pedidos em an√°lise",
    html: `
<strong>PRF ‚Äî Situa√ß√£o</strong>
- Concurso 2021 prorrogado at√© <strong>jun/2026</strong>.
- Novo edital prov√°vel no 2¬∫ semestre de 2026; provas possivelmente no in√≠cio de 2027.
- Monitorar extratos de pedido, autoriza√ß√µes e contrata√ß√£o de banca.
`
  },
  pcmt: {
    title: "PC-MT ‚Äî Investigador / Escriv√£o",
    subtitle: "PLDO 2026 ‚Äî Observa√ß√£o",
    html: `
<strong>PC-MT</strong>
- Previsto no PLDO 2026.
- Edital projetado para o 2¬∫ semestre de 2026, ap√≥s o fim da validade do √∫ltimo concurso.
`
  },
  pmt: {
    title: "PM-MT ‚Äî Soldado / Aluno Oficial",
    subtitle: "PLDO / Or√ßamento",
    html: `
<strong>PM-MT</strong>
- Previsto no PLDO 2026.
- Expectativa de edital condicionada √† dota√ß√£o or√ßament√°ria.
`
  },
  pcdf: {
    title: "PC-DF ‚Äî Per√≠cia",
    subtitle: "Autorizado ‚Äî 105 vagas",
    html: `
<strong>PC-DF</strong>
- Concurso autorizado: 105 vagas + 210 CR.
- Forte expectativa de edital entre 2026 e in√≠cio de 2027.
`
  },
  pcpr: {
    title: "PC-PR ‚Äî Delegado / Agente",
    subtitle: "Autorizado + Comiss√£o",
    html: `
<strong>PC-PR</strong>
- Autorizado (fev/2026). Comiss√£o formada.
- Previs√£o: 2¬∫ semestre de 2026.
`
  },
  pf: {
    title: "PF ‚Äî Nacional",
    subtitle: "Longo prazo",
    html: `
<strong>PF</strong>
- Pr√≥ximo grande edital tende a ficar para <strong>2028+</strong>, dependendo do esgotamento do ciclo atual de nomea√ß√µes.
`
  },
  pcgo: {
    title: "PC-GO",
    subtitle: "Em estudo",
    html: `
<strong>PC-GO</strong>
- Novo concurso em estudos; cen√°rio realista: edital entre 2026‚Äì2027.
`
  },
  pcto: {
    title: "PC-TO",
    subtitle: "Comiss√µes / Movimenta√ß√µes",
    html: `
<strong>PC-TO</strong>
- Movimenta√ß√µes administrativas indicam chances para 2026‚Äì2027.
`
  },
  help_custom: {
    title: "Como usar",
    subtitle: "Notas r√°pidas ‚Äî Virtus et Honor",
    html: `
- Clique em qualquer card para abrir o resumo espec√≠fico.
- Fechar modal: ESC, clicar fora ou no ‚úï.
- Use o bot√£o "Largura" para expandir (√∫til em embeds).
- Atualize textos no objeto contentRepo para editar os modais.
`
  }
};

/* ===== Small dataset to render cards in grid (keeps markup centralizado) ===== */
const cardsData = [
  { key:'pmgo', class:'alvo full', pill:'PREVISTO' },
  { key:'prf', class:'alvo half', pill:'M√âDIO PRAZO' },
  { key:'pcmt', class:'obs half', pill:'PLDO' },
  { key:'pmt', class:'obs half', pill:'PLDO' },
  { key:'pcdf', class:'obs half', pill:'AUTORIZADO' },
  { key:'pcpr', class:'obs half', pill:'AUTORIZADO' },
  { key:'pf', class:'reta half', pill:'LONGO PRAZO' },
  { key:'pcgo', class:'reta half', pill:'ESTUDO' },
  { key:'pcto', class:'reta half', pill:'COMISS√ÉO' }
];

/* ===== DOM references ===== */
const grid = document.getElementById('grid');
const modalBg = document.getElementById('modalBg');
const modal = modalBg.querySelector('.modal');
const modalTitle = document.getElementById('modalTitle');
const modalSub = document.getElementById('modalSub');
const modalBody = document.getElementById('modalBody');
const toggleWideBtn = document.getElementById('toggleWide');
const helpBtn = document.getElementById('helpBtn');
const copyLinkBtn = document.getElementById('copyLink');

/* ===== Render cards dynamically (avoids duplicated HTML and allows later updates) ===== */
function renderCards(){
  grid.innerHTML = ''; // clear
  for(const item of cardsData){
    const meta = contentRepo[item.key] || { title: item.key, subtitle:'', html:'' };
    const el = document.createElement('div');
    el.className = `card ${item.class} card-click`;
    el.setAttribute('role','listitem');
    el.setAttribute('data-key', item.key);
    el.tabIndex = 0;
    el.innerHTML = `
      <div class="head">
        <div>
          <div class="name">${meta.title}</div>
          <div class="meta">${meta.subtitle || ''}</div>
        </div>
        <div><span class="pill">${item.pill || ''}</span></div>
      </div>
      <div class="body">${stripTagsForPreview(meta.html)}</div>
    `;
    // keyboard accessibility
    el.addEventListener('click', ()=> openModal(item.key));
    el.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openModal(item.key); }});
    grid.appendChild(el);
  }
}

/* small helper to produce a short preview without raw HTML tags (keeps grid compact) */
function stripTagsForPreview(html){
  const tmp = document.createElement('div'); tmp.innerHTML = html;
  const text = tmp.textContent || tmp.innerText || '';
  return text.length > 140 ? text.slice(0,137)+'...' : text;
}

/* ===== Modal open / close with focus trap ===== */
let lastFocused = null;
function openModal(key){
  const data = contentRepo[key];
  if(!data) return;
  lastFocused = document.activeElement;
  modalTitle.textContent = data.title || '';
  modalSub.textContent = data.subtitle || 'Radar ‚Äî Virtus et Honor';
  modalBody.innerHTML = data.html || '';
  modalBg.classList.add('open');
  // small animation
  requestAnimationFrame(()=> modal.classList.add('open'));
  modalBg.setAttribute('aria-hidden','false');
  // focus management
  modal.setAttribute('tabindex','-1');
  setTimeout(()=> modal.focus(), 180);
  // lock scroll on host (best-effort)
  try { document.documentElement.style.overflow = 'hidden'; } catch(e){}
}

/* close modal cleanly */
function closeModal(){
  modal.classList.remove('open');
  modalBg.classList.remove('open'); // visually hide
  modalBg.setAttribute('aria-hidden','true');
  try { document.documentElement.style.overflow = ''; } catch(e){}
  if(lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
}

/* background click */
modalBg.addEventListener('click', (e)=> { if(e.target === modalBg) closeModal(); });
document.getElementById('modalClose').addEventListener('click', closeModal);

/* esc key */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape' && modalBg.classList.contains('open')) { closeModal(); }
  // keyboard shortcuts: W toggles wide, H opens help
  if(!e.ctrlKey && !e.metaKey && !e.altKey){
    if(e.key.toLowerCase() === 'w') { toggleWide(); }
    if(e.key.toLowerCase() === 'h') { openModal('help_custom'); }
  }
});

/* trap focus inside modal while open (simple implementation) */
document.addEventListener('focus', function(e){
  if(modalBg.classList.contains('open') && !modal.contains(e.target)){
    e.stopPropagation();
    modal.focus();
  }
}, true);

/* toggle wide layout */
function toggleWide(){
  document.getElementById('radarWrap').classList.toggle('wide');
  toggleWideBtn.textContent = document.getElementById('radarWrap').classList.contains('wide') ? 'üóî Wide' : '‚Üî Largura';
}
toggleWideBtn.addEventListener('click', toggleWide);
helpBtn.addEventListener('click', ()=> openModal('help_custom'));

/* copy link button (copies current GitHub Pages link if present in document.title or meta)
   Best-effort: use location.href if running from GitHub Pages; otherwise copy repo root. */
copyLinkBtn.addEventListener('click', ()=>{
  const url = (location.hostname && location.hostname.endsWith('github.io')) ? location.href : 'https://Fernando-NK.github.io/Widget-Notion/';
  navigator.clipboard?.writeText(url).then(()=>{
    copyLinkBtn.textContent = '‚úì Copiado';
    setTimeout(()=> copyLinkBtn.textContent = 'üîó Copiar link', 1400);
  }).catch(()=> {
    copyLinkBtn.textContent = 'Erro';
    setTimeout(()=> copyLinkBtn.textContent = 'üîó Copiar link', 1400);
  });
});

/* render & init */
renderCards();

/* Defensive: if inside iframe and host applies white background, attempt additional runtime fix */
(function runtimeEmbedPatch(){
  try {
    const isInIframe = window.self !== window.top;
    if(isInIframe){
      // attempt to set body background transparent (already set via CSS) and remove default margins
      document.documentElement.style.background='transparent';
      document.body.style.background='transparent';
      document.body.style.margin='0';
      // Some embed hosts inject a wrapper; try to remove common wrapper backgrounds
      const wrappers = window.frameElement ? [window.frameElement] : [];
      wrappers.forEach(w => { try { w.style.background = 'transparent'; } catch(e){} });
    }
  } catch(e){}
})();

/* Accessibility / telemetry minimal: announce loaded */
(function announceLoad(){
  const live = document.createElement('div');
  live.className = 'sr-only'; live.setAttribute('aria-live','polite');
  live.textContent = 'Radar carregado';
  document.body.appendChild(live);
  setTimeout(()=> live.remove(),2500);
})();
</script>
</body>
</html>
